(function(){angular.module("app.controllers").controller("ImagePickerController",function(n,t,i){return n.recordImage=angular.copy(i),n.images=[],n.rowsPerPage=3,n.imagesPerRow=3,n.noOfPages=0,n.currentPage=0,n.page=[],n.getImages=function(){return t.get("").then(function(t){return n.images=t.data,n.images=n.images.sort(function(n,t){return new Date(t.LastEdited)-new Date(n.LastEdited)}),console.log(n.images),n.noOfPages=Math.ceil(n.images.length/(n.rowsPerPage*n.imagesPerRow)),n.setPage(n.currentPage)})},n.setPage=function(t){var i;if(!(t<0)&&t!==n.noOfPages)return i=n.rowsPerPage*n.imagesPerRow,n.page=n.images.length<=i?n.makePageFromImages(n.images):n.makePageFromImages(n.images.slice(i*t,i*t+i)),n.currentPage=t},n.makePageFromImages=function(t){var u,f,e,i,r;if(f=[],t.length<=n.imagesPerRow)f.push(t);else for(i=Math.ceil(t.length/n.imagesPerRow),u=r=0;0<=i?r<i:r>i;u=0<=i?++r:--r)e=t.slice(u*n.imagesPerRow,u*n.imagesPerRow+n.imagesPerRow),f.push(e);return f},n.saveImage=function(t){return n.recordImage||(n.recordImage={url:null,height:0,width:0,crops:{squareUrl:null,thumbnailUrl:null}}),n.recordImage.url=t.Url,n.recordImage.width=t.Width,n.recordImage.height=t.Height,n.recordImage.crops.squareUrl=t.Crops.Square,n.recordImage.crops.thumbnailUrl=t.Crops.ListingThumbnail},n.ok=function(){return n.$close(n.recordImage)},n.getImages()})}).call(this);